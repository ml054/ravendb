<div class="content-margin">
<div data-bind="visible: subscriptions().length === 0">
    <div class="row">
        <div class="col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3">
            <i class="icon-xl icon-empty-set text-muted"></i>
            <h2 class="text-center">No data subscriptions have been created for this database.</h2>
        </div>
    </div>
</div>

<div data-bind="foreach: subscriptions()">
    <div class="panel panel-default" data-subscription-id="1">
        <div class="panel-heading">
            <div class="row">
                <div class="col-sm-3">
                    <i data-bind="css: { 'icon-disconnected': !Connection, 'icon-connected': Connection }"></i>

                    <strong>ID <span data-bind="text: SubscriptionId"></span></strong>
                    &nbsp;&nbsp;
                    <a class="nobr" data-toggle="collapse" data-bind="attr: { href: '#subscription-details-' + SubscriptionId }">
                        Show details
                    </a>
                </div>
                <div class="col-sm-9">
                    <span>Acknowledged ETag:</span>&nbsp;
                    <span class="static-name padding padding-xs" data-bind="text: AckEtag"></span>
                </div>
            </div>
        </div>
        <div class="panel-body collapse" data-bind="attr: { id: 'subscription-details-' + SubscriptionId }">
            <div class="row">
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-xs-6 col-sm-3 text-right">
                            <label>Last client acknowledgement time</label>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <span class="static-name" data-bind="text: TimeOfReceivingLastAck"></span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-sm-3 text-right">
                            <label>Collection</label>
                        </div>
                        <div class="col-xs-6 col-sm-4" data-bind="text: Criteria.Collection">

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-sm-3 text-right">
                            <label>Filter script</label>
                        </div>
                        <div class="col-xs-6 col-sm-4" data-bind="html: $root.filterFormatter(Criteria.FilterJavaScript)">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-sm-3 text-right">
                            <label>Client connected</label>
                        </div>
                        <div class="col-xs-6 col-sm-4">
                            <span class="static-name" data-bind="text: Connection ? 'Yes': 'No'"></span>
                        </div>
                    </div>

                    <div data-bind="with: Connection">
                        <div>
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 text-right">
                                    <label>Last message send at</label>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <span class="static-name" data-bind="text: Stats.LastMessageSentAt"></span>
                                </div>
                                
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-3 text-primary text-right">
                                    <h3>Connection options</h3>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 text-right">
                                    <label>Client URI</label>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <span class="static-name" data-bind="text: ClientUri"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 text-right">
                                    <label>Connection ID</label>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <span class="static-name" data-bind="text: Options.ClientSubscriptionId"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 text-right">
                                    <label>Ignore subscriber errors</label>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <span class="static-name" data-bind="text: Options.IgnoreSubscriberErrors ? 'Yes':'No'"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 text-right">
                                    <label>Time to wait before connection retry</label>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <span class="static-name" data-bind="text: $root.constructor.formatMillis(Options.TimeToWaitBeforeConnectionRetryMilliseconds)"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 text-right">
                                    <label>Opening strategy</label>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <span class="static-name" data-bind="text: Options.Strategy"></span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 text-right">
                                    <label>Max documents per batch</label>
                                </div>
                                <div class="col-xs-6 col-sm-4">
                                    <span class="static-name" data-bind="text: Options.MaxDocsPerBatch"></span>
                                </div>
                            </div>
                            
                            <!-- TODO: stats 
                            <div class="row">
                                <div class="col-xs-6 col-sm-3 text-right text-primary">
                                    <h4>Statistics</h4>
                                </div>
                            </div>
                            <div data-bind="with: Stats">
                                <div class="row">
                                    <div class="col-xs-6 col-sm-3 text-right">
                                        <label>AckRate, BytesRate, DocsRate</label>
                                    </div>
                                    <div class="col-xs-6 col-sm-4">
                                        <span class="static-name">TODO 436</span>
                                    </div>
                                </div>
                            </div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>